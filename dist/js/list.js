"use strict";function asyncGeneratorStep(t,n,e,a,o,r,s){try{var i=t[r](s),c=i.value}catch(t){return void e(t)}i.done?n(c):Promise.resolve(c).then(a,o)}function _asyncToGenerator(i){return function(){var t=this,s=arguments;return new Promise(function(n,e){var a=i.apply(t,s);function o(t){asyncGeneratorStep(a,n,e,o,r,"next",t)}function r(t){asyncGeneratorStep(a,n,e,o,r,"throw",t)}o(void 0)})}}var classOne=getCookie("class_one");$(function(){var a=null,o={class_one:classOne,class_two:"all",sort_method:"价格",sort_price:"ASC",current:1,pagesize:20};function t(){return(t=_asyncToGenerator(regeneratorRuntime.mark(function t(){var n,e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$.get("/dl/getClassOne.php",null,null,"json");case 2:n=t.sent,e="",n.list.forEach(function(t){e+='\n    <li data-one="'.concat(t.class_one,'">').concat(t.class_one,"</li>\n    ")}),$("#class_one").html(e),$("#class_one").find("li").each(function(t,n){$(n).data("one")==classOne&&$(n).addClass("active")});case 7:case"end":return t.stop()}},t)}))).apply(this,arguments)}function n(){return e.apply(this,arguments)}function e(){return(e=_asyncToGenerator(regeneratorRuntime.mark(function t(){var n,e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$.get("/dl/getClassTwo.php",{classOne:o.class_one},null,"json");case 2:n=t.sent,e=" <li data-two=\"all\"class='active'>全部</li>",n.list.forEach(function(t){e+='\n    <li data-two="'.concat(t.class_two,'">').concat(t.class_two,"</li>\n    ")}),$("#class_two").html(e);case 6:case"end":return t.stop()}},t)}))).apply(this,arguments)}function r(){return s.apply(this,arguments)}function s(){return(s=_asyncToGenerator(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$.get("/dl/getPage.php",o,null,"json");case 2:n=t.sent,$("#paging > .main").pagination({pageCount:n.number,current:1,coping:!0,keepShowPN:!0,activeCls:"pitch",prevContent:"上页",nextContent:"下页",callback:function(t){o.current=t.getCurrent(),i()}});case 4:case"end":return t.stop()}},t)}))).apply(this,arguments)}function i(){return c.apply(this,arguments)}function c(){return(c=_asyncToGenerator(regeneratorRuntime.mark(function t(){var n,e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$.get("/dl/getGoodsList.php",o,null,"json");case 2:n=t.sent,a=n.list,e="",n.list.forEach(function(t){e+='\n            <div >\n            <div class="index_img" data-id='.concat(t.Id,'>\n               <img src="').concat(t.shop_img,' " alt="">\n            </div>\n            <h5 data-id=').concat(t.Id,">").concat(t.price,"</h5>\n             <h6 data-id=").concat(t.Id,">").concat(t.title,'</h6>\n             <p>\n                 <a  class="btn btn-primary cartBox" role="button" data-id=').concat(t.Id,' > <img src="../images/icon_cart.png" alt="" > 加入购车</a> \n                 <a  class="btn btn-default" role="button">  收藏</a>\n                <a  class="btn btn-default" role="button"> <img src="../images/kefu.png" alt=""></a>\n            </p>\n         </div>\n            ')}),$("#list > .goods").html(e);case 7:case"end":return t.stop()}},t)}))).apply(this,arguments)}!function(){t.apply(this,arguments)}(),n(),r(),i(),$("#class_one").on("click","li",function(){$(this).addClass("active").siblings().removeClass("active");var t=$(this).data("one");o.class_two="all",o.current=1,o.class_one=t,n(),r(),i()}),$("#class_two").on("click","li",function(){$(this).addClass("active").siblings().removeClass("active");var t=$(this).data("two");o.current=1,o.class_two=t,r(),i()}),$("#price").on("click","li",function(){$(this).toggleClass("active");var t=$(this).attr("data-type");o.sort_price=t,r(),i(),$(this).attr("data-type","ASC"===t?"DESC":"ASC")}),$("#list .goods").on("click",".index_img",function(){var t=$(this).data("id");setCookie("shop_id",t),window.location.href="../html/details.html"}),$("#list .goods").on("click","div h6",function(){var t=$(this).data("id");setCookie("shop_id",t),window.location.href="../html/details.html"}),$("#list .goods").on("click","div h5",function(){var t=$(this).data("id");setCookie("shop_id",t),window.location.href="../html/details.html"}),$("#list .goods").on("click",".cartBox",function(){var t,n=JSON.parse(window.localStorage.getItem("cart"))||[],e=$(this).data("id");n.some(function(t){t.shop_id})?(t=n.filter(function(t){return t.shop_id==e})[0]).cart_number=+t.cart_number+1:((t=a.filter(function(t){return t.shop_id==e})[0]).cart_number=1,n.push(t),console.log(1)),window.localStorage.setItem("cart",JSON.stringify(n))})});